<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>QR Code</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://mohan-chinnappan-n.github.io/css/navbar-blue.css" />
  <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.js"></script>

  <script src="https://mohan-chinnappan-n.github.io/sfdc/gs/js/split.js"></script>
  <link rel="stylesheet" href="https://mohan-chinnappan-n.github.io/sfdc/gs/css/split.css" />

    
<style>
#qrcode {
  width:160px;
  height:160px;
  margin-top:15px;
}
</style>

</head>
<body>

 <nav class="navbar navbar-default" role="navigation" style="margin-bottom:0px;">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="javascript:void(0)">QR Code</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#/home">Home</a></li>
      </ul>
    </div>
  </nav>

  <div class="split split-horizontal" id="menu">
    <textarea class='form-control' id="text" rows='1' cols='80'>
  An ounce of practice is worth more than tons of preaching. - Mohandas K Gandhi</textarea>
      <button class='btn btn-primary' id='qr'>QR</button>
  </div>

  <div class="split split-horizontal" id="content">
   <div id="qrcode"></div>
  </div> 

<script>

    var qrcode = new QRCode("qrcode");

  // query parm parser
 let getQueryParams = () => {
  const query = location.search.substr(1);
  let result = {};
  query.split("&").forEach(function(part) {
       const item = part.split("=");
       result[item[0]] = decodeURIComponent(item[1]);
  });
  return result;
 };

 let params = getQueryParams();
    console.log(params.f);
    //const url =  params.f ;
    const text =  params.f || 'An ounce of practice is worth more than tons of preaching. - Mohandas K Gandhi';
    document.getElementById('text').value = text;
    //console.log(`url: ${url}`);
    qrcode.makeCode(text); 
    



function makeCode () {		
	var elText = document.getElementById("text");
	
	if (!elText.value) {
		alert("Input a text");
		elText.focus();
		return;
	}
	
	qrcode.makeCode(elText.value);
}

// makeCode();

$('#qr').click( function() {
  makeCode();
}); 

$("#text").
	on("blur", function () {
		makeCode();
	}).
	on("keydown", function (e) {
		if (e.keyCode == 13) {
			makeCode();
		}
	});



Split(["#menu", "#content"], {
      sizes: [55, 45]
});


</script>
</body>
</html>
